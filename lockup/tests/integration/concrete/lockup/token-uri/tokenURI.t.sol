// SPDX-License-Identifier: UNLICENSED
// solhint-disable max-line-length,no-console,quotes
pragma solidity >=0.8.22 <0.9.0;

import { IERC721Errors } from "@openzeppelin/contracts/interfaces/draft-IERC6093.sol";
import { console2 } from "forge-std/src/console2.sol";
import { StdStyle } from "forge-std/src/StdStyle.sol";
import { Base64 } from "solady/src/utils/Base64.sol";

import { Integration_Test } from "../../../Integration.t.sol";

/// @dev Requirements for these tests to work:
/// - The stream ID must be 1
/// - The stream's sender must be `0x6332e7b1deb1f1a0b77b2bb18b144330c7291bca`, i.e. `makeAddr("Sender")`
/// - The stream token must have the DAI symbol
/// - The contract deployer, i.e. the `sender` config option in `foundry.toml`, must have the default value
/// 0x1804c8AB1F12E6bbf3894d4083f33e07309d1f38 so that the deployed contracts have the same addresses as
/// the values hard coded in the tests below
contract TokenURI_Lockup_Integration_Concrete_Test is Integration_Test {
    address internal constant LOCKUP = 0x3D7Ebc40AF7092E3F1C81F2e996cbA5Cae2090d7;

    /// @dev To make these tests noninvasive, they are run only when the contract address matches the hard coded value.
    modifier skipOnMismatch() {
        if (address(lockup) == LOCKUP) {
            _;
        } else {
            console2.log(
                StdStyle.yellow(
                    string.concat(
                        'Warning: "Lockup.tokenURI" tests skipped due to address mismatch: expected: ',
                        vm.toString(LOCKUP),
                        ", actual: ",
                        vm.toString(address(lockup))
                    )
                )
            );
        }
    }

    function test_RevertGiven_NFTNotExist() external {
        vm.expectRevert(abi.encodeWithSelector(IERC721Errors.ERC721NonexistentToken.selector, ids.nullStream));
        lockup.tokenURI({ tokenId: ids.nullStream });
    }

    /// @dev If you need to update the hard-coded token URI:
    /// 1. Use "vm.writeFile" to log the strings to a file.
    /// 2. Remember to escape the EOL character \n with \\n.
    function test_WhenTokenURIDecoded() external skipOnMismatch givenNFTExists {
        vm.warp({ newTimestamp: defaults.START_TIME() + defaults.TOTAL_DURATION() / 4 });

        string memory tokenURI = lockup.tokenURI(ids.defaultStream);
        tokenURI = vm.replace({ input: tokenURI, from: "data:application/json;base64,", to: "" });
        string memory actualDecodedTokenURI = string(Base64.decode(tokenURI));
        string memory expectedDecodedTokenURI =
            unicode'{"attributes":[{"trait_type":"Token","value":"DAI"},{"trait_type":"Sender","value":"0x6332e7b1deb1f1a0b77b2bb18b144330c7291bca"},{"trait_type":"Status","value":"Streaming"}],"description":"This NFT represents a stream in a Sablier Lockup contract. The owner of this NFT can withdraw the streamed tokens, which are denominated in DAI.\\n\\n- Stream ID: 1\\n- Sablier Lockup Address: 0x3d7ebc40af7092e3f1c81f2e996cba5cae2090d7\\n- DAI Address: 0xa0cb889707d426a7a386870a03bc70d1b0697598\\n\\n⚠️ WARNING: Transferring the NFT makes the new owner the recipient of the stream. The funds are not automatically withdrawn for the previous recipient.","external_url":"https://sablier.com","name":"Sablier Lockup #1","image":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbHRlcj0idXJsKCNOb2lzZSkiLz48cmVjdCB4PSI3MCIgeT0iNzAiIHdpZHRoPSI4NjAiIGhlaWdodD0iODYwIiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9Ii4wMyIgcng9IjQ1IiByeT0iNDUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLW9wYWNpdHk9Ii4xIiBzdHJva2Utd2lkdGg9IjQiLz48ZGVmcz48Y2lyY2xlIGlkPSJHbG93IiByPSI1MDAiIGZpbGw9InVybCgjUmFkaWFsR2xvdykiLz48ZmlsdGVyIGlkPSJOb2lzZSI+PGZlRmxvb2QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmxvb2QtY29sb3I9ImhzbCgyMzAsMjElLDExJSkiIGZsb29kLW9wYWNpdHk9IjEiIHJlc3VsdD0iZmxvb2RGaWxsIi8+PGZlVHVyYnVsZW5jZSBiYXNlRnJlcXVlbmN5PSIuNCIgbnVtT2N0YXZlcz0iMyIgcmVzdWx0PSJOb2lzZSIgdHlwZT0iZnJhY3RhbE5vaXNlIi8+PGZlQmxlbmQgaW49Ik5vaXNlIiBpbjI9ImZsb29kRmlsbCIgbW9kZT0ic29mdC1saWdodCIvPjwvZmlsdGVyPjxwYXRoIGlkPSJMb2dvIiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9Ii4xIiBkPSJtMTMzLjU1OSwxMjQuMDM0Yy0uMDEzLDIuNDEyLTEuMDU5LDQuODQ4LTIuOTIzLDYuNDAyLTIuNTU4LDEuODE5LTUuMTY4LDMuNDM5LTcuODg4LDQuOTk2LTE0LjQ0LDguMjYyLTMxLjA0NywxMi41NjUtNDcuNjc0LDEyLjU2OS04Ljg1OC4wMzYtMTcuODM4LTEuMjcyLTI2LjMyOC0zLjY2My05LjgwNi0yLjc2Ni0xOS4wODctNy4xMTMtMjcuNTYyLTEyLjc3OC0xMy44NDItOC4wMjUsOS40NjgtMjguNjA2LDE2LjE1My0zNS4yNjVoMGMyLjAzNS0xLjgzOCw0LjI1Mi0zLjU0Niw2LjQ2My01LjIyNGgwYzYuNDI5LTUuNjU1LDE2LjIxOC0yLjgzNSwyMC4zNTgsNC4xNyw0LjE0Myw1LjA1Nyw4LjgxNiw5LjY0OSwxMy45MiwxMy43MzRoLjAzN2M1LjczNiw2LjQ2MSwxNS4zNTctMi4yNTMsOS4zOC04LjQ4LDAsMC0zLjUxNS0zLjUxNS0zLjUxNS0zLjUxNS0xMS40OS0xMS40NzgtNTIuNjU2LTUyLjY2NC02NC44MzctNjQuODM3bC4wNDktLjAzN2MtMS43MjUtMS42MDYtMi43MTktMy44NDctMi43NTEtNi4yMDRoMGMtLjA0Ni0yLjM3NSwxLjA2Mi00LjU4MiwyLjcyNi02LjIyOWgwbC4xODUtLjE0OGgwYy4wOTktLjA2MiwuMjIyLS4xNDgsLjM3LS4yNTloMGMyLjA2LTEuMzYyLDMuOTUxLTIuNjIxLDYuMDQ0LTMuODQyQzU3Ljc2My0zLjQ3Myw5Ny43Ni0yLjM0MSwxMjguNjM3LDE4LjMzMmMxNi42NzEsOS45NDYtMjYuMzQ0LDU0LjgxMy0zOC42NTEsNDAuMTk5LTYuMjk5LTYuMDk2LTE4LjA2My0xNy43NDMtMTkuNjY4LTE4LjgxMS02LjAxNi00LjA0Ny0xMy4wNjEsNC43NzYtNy43NTIsOS43NTFsNjguMjU0LDY4LjM3MWMxLjcyNCwxLjYwMSwyLjcxNCwzLjg0LDIuNzM4LDYuMTkyWiIvPjxwYXRoIGlkPSJGbG9hdGluZ1RleHQiIGZpbGw9Im5vbmUiIGQ9Ik0xMjUgNDVoNzUwczgwIDAgODAgODB2NzUwczAgODAgLTgwIDgwaC03NTBzLTgwIDAgLTgwIC04MHYtNzUwczAgLTgwIDgwIC04MCIvPjxyYWRpYWxHcmFkaWVudCBpZD0iUmFkaWFsR2xvdyI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iaHNsKDMyOSw0NSUsNTklKSIgc3RvcC1vcGFjaXR5PSIuNiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iaHNsKDIzMCwyMSUsMTElKSIgc3RvcC1vcGFjaXR5PSIwIi8+PC9yYWRpYWxHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9IlNhbmRUb3AiIHgxPSIwJSIgeTE9IjAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSJoc2woMzI5LDQ1JSw1OSUpIi8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSJoc2woMjMwLDIxJSwxMSUpIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9IlNhbmRCb3R0b20iIHgxPSIxMDAlIiB5MT0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIxMCUiIHN0b3AtY29sb3I9ImhzbCgyMzAsMjElLDExJSkiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9ImhzbCgzMjksNDUlLDU5JSkiLz48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJ4MSIgZHVyPSI2cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIHZhbHVlcz0iMzAlOzYwJTsxMjAlOzYwJTszMCU7Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9IkhvdXJnbGFzc1N0cm9rZSIgZ3JhZGllbnRUcmFuc2Zvcm09InJvdGF0ZSg5MCkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iaHNsKDMyOSw0NSUsNTklKSIvPjxzdG9wIG9mZnNldD0iODAlIiBzdG9wLWNvbG9yPSJoc2woMjMwLDIxJSwxMSUpIi8+PC9saW5lYXJHcmFkaWVudD48ZyBpZD0iSG91cmdsYXNzIj48cGF0aCBkPSJNIDUwLDM2MCBhIDMwMCwzMDAgMCAxLDEgNjAwLDAgYSAzMDAsMzAwIDAgMSwxIC02MDAsMCIgZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIuMDIiIHN0cm9rZT0idXJsKCNIb3VyZ2xhc3NTdHJva2UpIiBzdHJva2Utd2lkdGg9IjQiLz48cGF0aCBkPSJtNTY2LDE2MS4yMDF2LTUzLjkyNGMwLTE5LjM4Mi0yMi41MTMtMzcuNTYzLTYzLjM5OC01MS4xOTgtNDAuNzU2LTEzLjU5Mi05NC45NDYtMjEuMDc5LTE1Mi41ODctMjEuMDc5cy0xMTEuODM4LDcuNDg3LTE1Mi42MDIsMjEuMDc5Yy00MC44OTMsMTMuNjM2LTYzLjQxMywzMS44MTYtNjMuNDEzLDUxLjE5OHY1My45MjRjMCwxNy4xODEsMTcuNzA0LDMzLjQyNyw1MC4yMjMsNDYuMzk0djI4NC44MDljLTMyLjUxOSwxMi45Ni01MC4yMjMsMjkuMjA2LTUwLjIyMyw0Ni4zOTR2NTMuOTI0YzAsMTkuMzgyLDIyLjUyLDM3LjU2Myw2My40MTMsNTEuMTk4LDQwLjc2MywxMy41OTIsOTQuOTU0LDIxLjA3OSwxNTIuNjAyLDIxLjA3OXMxMTEuODMxLTcuNDg3LDE1Mi41ODctMjEuMDc5YzQwLjg4Ni0xMy42MzYsNjMuMzk4LTMxLjgxNiw2My4zOTgtNTEuMTk4di01My45MjRjMC0xNy4xOTYtMTcuNzA0LTMzLjQzNS01MC4yMjMtNDYuNDAxVjIwNy42MDNjMzIuNTE5LTEyLjk2Nyw1MC4yMjMtMjkuMjA2LDUwLjIyMy00Ni40MDFabS0zNDcuNDYyLDU3Ljc5M2wxMzAuOTU5LDEzMS4wMjctMTMwLjk1OSwxMzEuMDEzVjIxOC45OTRabTI2Mi45MjQuMDIydjI2Mi4wMThsLTEzMC45MzctMTMxLjAwNiwxMzAuOTM3LTEzMS4wMTNaIiBmaWxsPSIjMTYxODIyIj48L3BhdGg+PHBvbHlnb24gcG9pbnRzPSIzNTAgMzUwLjAyNiA0MTUuMDMgMjg0Ljk3OCAyODUgMjg0Ljk3OCAzNTAgMzUwLjAyNiIgZmlsbD0idXJsKCNTYW5kQm90dG9tKSIvPjxwYXRoIGQ9Im00MTYuMzQxLDI4MS45NzVjMCwuOTE0LS4zNTQsMS44MDktMS4wMzUsMi42OC01LjU0Miw3LjA3Ni0zMi42NjEsMTIuNDUtNjUuMjgsMTIuNDUtMzIuNjI0LDAtNTkuNzM4LTUuMzc0LTY1LjI4LTEyLjQ1LS42ODEtLjg3Mi0xLjAzNS0xLjc2Ny0xLjAzNS0yLjY4LDAtLjkxNC4zNTQtMS44MDgsMS4wMzUtMi42NzYsNS41NDItNy4wNzYsMzIuNjU2LTEyLjQ1LDY1LjI4LTEyLjQ1LDMyLjYxOSwwLDU5LjczOCw1LjM3NCw2NS4yOCwxMi40NS42ODEuODY3LDEuMDM1LDEuNzYyLDEuMDM1LDIuNjc2WiIgZmlsbD0idXJsKCNTYW5kVG9wKSIvPjxwYXRoIGQ9Im00ODEuNDYsNTA0LjEwMXY1OC40NDljLTIuMzUuNzctNC44MiwxLjUxLTcuMzksMi4yMy0zMC4zLDguNTQtNzQuNjUsMTMuOTItMTI0LjA2LDEzLjkyLTUzLjYsMC0xMDEuMjQtNi4zMy0xMzEuNDctMTYuMTZ2LTU4LjQzOWgyNjIuOTJaIiBmaWxsPSJ1cmwoI1NhbmRCb3R0b20pIi8+PGVsbGlwc2UgY3g9IjM1MCIgY3k9IjUwNC4xMDEiIHJ4PSIxMzEuNDYyIiByeT0iMjguMTA4IiBmaWxsPSJ1cmwoI1NhbmRUb3ApIi8+PGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJ1cmwoI0hvdXJnbGFzc1N0cm9rZSkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjQiPjxwYXRoIGQ9Im01NjUuNjQxLDEwNy4yOGMwLDkuNTM3LTUuNTYsMTguNjI5LTE1LjY3NiwyNi45NzNoLS4wMjNjLTkuMjA0LDcuNTk2LTIyLjE5NCwxNC41NjItMzguMTk3LDIwLjU5Mi0zOS41MDQsMTQuOTM2LTk3LjMyNSwyNC4zNTUtMTYxLjczMywyNC4zNTUtOTAuNDgsMC0xNjcuOTQ4LTE4LjU4Mi0xOTkuOTUzLTQ0Ljk0OGgtLjAyM2MtMTAuMTE1LTguMzQ0LTE1LjY3Ni0xNy40MzctMTUuNjc2LTI2Ljk3MywwLTM5LjczNSw5Ni41NTQtNzEuOTIxLDIxNS42NTItNzEuOTIxczIxNS42MjksMzIuMTg1LDIxNS42MjksNzEuOTIxWiIvPjxwYXRoIGQ9Im0xMzQuMzYsMTYxLjIwM2MwLDM5LjczNSw5Ni41NTQsNzEuOTIxLDIxNS42NTIsNzEuOTIxczIxNS42MjktMzIuMTg2LDIxNS42MjktNzEuOTIxIi8+PGxpbmUgeDE9IjEzNC4zNiIgeTE9IjE2MS4yMDMiIHgyPSIxMzQuMzYiIHkyPSIxMDcuMjgiLz48bGluZSB4MT0iNTY1LjY0IiB5MT0iMTYxLjIwMyIgeDI9IjU2NS42NCIgeTI9IjEwNy4yOCIvPjxsaW5lIHgxPSIxODQuNTg0IiB5MT0iMjA2LjgyMyIgeDI9IjE4NC41ODUiIHkyPSI1MzcuNTc5Ii8+PGxpbmUgeDE9IjIxOC4xODEiIHkxPSIyMTguMTE4IiB4Mj0iMjE4LjE4MSIgeTI9IjU2Mi41MzciLz48bGluZSB4MT0iNDgxLjgxOCIgeTE9IjIxOC4xNDIiIHgyPSI0ODEuODE5IiB5Mj0iNTYyLjQyOCIvPjxsaW5lIHgxPSI1MTUuNDE1IiB5MT0iMjA3LjM1MiIgeDI9IjUxNS40MTYiIHkyPSI1MzcuNTc5Ii8+PHBhdGggZD0ibTE4NC41OCw1MzcuNThjMCw1LjQ1LDQuMjcsMTAuNjUsMTIuMDMsMTUuNDJoLjAyYzUuNTEsMy4zOSwxMi43OSw2LjU1LDIxLjU1LDkuNDIsMzAuMjEsOS45LDc4LjAyLDE2LjI4LDEzMS44MywxNi4yOCw0OS40MSwwLDkzLjc2LTUuMzgsMTI0LjA2LTEzLjkyLDIuNy0uNzYsNS4yOS0xLjU0LDcuNzUtMi4zNSw4Ljc3LTIuODcsMTYuMDUtNi4wNCwyMS41Ni05LjQzaDBjNy43Ni00Ljc3LDEyLjA0LTkuOTcsMTIuMDQtMTUuNDIiLz48cGF0aCBkPSJtMTg0LjU4Miw0OTIuNjU2Yy0zMS4zNTQsMTIuNDg1LTUwLjIyMywyOC41OC01MC4yMjMsNDYuMTQyLDAsOS41MzYsNS41NjQsMTguNjI3LDE1LjY3NywyNi45NjloLjAyMmM4LjUwMyw3LjAwNSwyMC4yMTMsMTMuNDYzLDM0LjUyNCwxOS4xNTksOS45OTksMy45OTEsMjEuMjY5LDcuNjA5LDMzLjU5NywxMC43ODgsMzYuNDUsOS40MDcsODIuMTgxLDE1LjAwMiwxMzEuODM1LDE1LjAwMnM5NS4zNjMtNS41OTUsMTMxLjgwNy0xNS4wMDJjMTAuODQ3LTIuNzksMjAuODY3LTUuOTI2LDI5LjkyNC05LjM0OSwxLjI0NC0uNDY3LDIuNDczLS45NDIsMy42NzMtMS40MjQsMTQuMzI2LTUuNjk2LDI2LjAzNS0xMi4xNjEsMzQuNTI0LTE5LjE3M2guMDIyYzEwLjExNC04LjM0MiwxNS42NzctMTcuNDMzLDE1LjY3Ny0yNi45NjksMC0xNy41NjItMTguODY5LTMzLjY2NS01MC4yMjMtNDYuMTUiLz48cGF0aCBkPSJtMTM0LjM2LDU5Mi43MmMwLDM5LjczNSw5Ni41NTQsNzEuOTIxLDIxNS42NTIsNzEuOTIxczIxNS42MjktMzIuMTg2LDIxNS42MjktNzEuOTIxIi8+PGxpbmUgeDE9IjEzNC4zNiIgeTE9IjU5Mi43MiIgeDI9IjEzNC4zNiIgeTI9IjUzOC43OTciLz48bGluZSB4MT0iNTY1LjY0IiB5MT0iNTkyLjcyIiB4Mj0iNTY1LjY0IiB5Mj0iNTM4Ljc5NyIvPjxwb2x5bGluZSBwb2ludHM9IjQ4MS44MjIgNDgxLjkwMSA0ODEuNzk4IDQ4MS44NzcgNDgxLjc3NSA0ODEuODU0IDM1MC4wMTUgMzUwLjAyNiAyMTguMTg1IDIxOC4xMjkiLz48cG9seWxpbmUgcG9pbnRzPSIyMTguMTg1IDQ4MS45MDEgMjE4LjIzMSA0ODEuODU0IDM1MC4wMTUgMzUwLjAyNiA0ODEuODIyIDIxOC4xNTIiLz48L2c+PC9nPjxnIGlkPSJQcm9ncmVzcyIgZmlsbD0iI2ZmZiI+PHJlY3Qgd2lkdGg9IjIwOCIgaGVpZ2h0PSIxMDAiIGZpbGwtb3BhY2l0eT0iLjAzIiByeD0iMTUiIHJ5PSIxNSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utb3BhY2l0eT0iLjEiIHN0cm9rZS13aWR0aD0iNCIvPjx0ZXh0IHg9IjIwIiB5PSIzNCIgZm9udC1mYW1pbHk9IidDb3VyaWVyIE5ldycsQXJpYWwsbW9ub3NwYWNlIiBmb250LXNpemU9IjIycHgiPlByb2dyZXNzPC90ZXh0Pjx0ZXh0IHg9IjIwIiB5PSI3MiIgZm9udC1mYW1pbHk9IidDb3VyaWVyIE5ldycsQXJpYWwsbW9ub3NwYWNlIiBmb250LXNpemU9IjI2cHgiPjIyLjk4JTwvdGV4dD48ZyBmaWxsPSJub25lIj48Y2lyY2xlIGN4PSIxNjYiIGN5PSI1MCIgcj0iMjIiIHN0cm9rZT0iaHNsKDIzMCwyMSUsMTElKSIgc3Ryb2tlLXdpZHRoPSIxMCIvPjxjaXJjbGUgY3g9IjE2NiIgY3k9IjUwIiBwYXRoTGVuZ3RoPSIxMDAwMCIgcj0iMjIiIHN0cm9rZT0iaHNsKDMyOSw0NSUsNTklKSIgc3Ryb2tlLWRhc2hhcnJheT0iMTAwMDAiIHN0cm9rZS1kYXNob2Zmc2V0PSI3NzAyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwKSIgdHJhbnNmb3JtLW9yaWdpbj0iMTY2IDUwIi8+PC9nPjwvZz48ZyBpZD0iU3RhdHVzIiBmaWxsPSIjZmZmIj48cmVjdCB3aWR0aD0iMTg0IiBoZWlnaHQ9IjEwMCIgZmlsbC1vcGFjaXR5PSIuMDMiIHJ4PSIxNSIgcnk9IjE1IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1vcGFjaXR5PSIuMSIgc3Ryb2tlLXdpZHRoPSI0Ii8+PHRleHQgeD0iMjAiIHk9IjM0IiBmb250LWZhbWlseT0iJ0NvdXJpZXIgTmV3JyxBcmlhbCxtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMjJweCI+U3RhdHVzPC90ZXh0Pjx0ZXh0IHg9IjIwIiB5PSI3MiIgZm9udC1mYW1pbHk9IidDb3VyaWVyIE5ldycsQXJpYWwsbW9ub3NwYWNlIiBmb250LXNpemU9IjI2cHgiPlN0cmVhbWluZzwvdGV4dD48L2c+PGcgaWQ9IkFtb3VudCIgZmlsbD0iI2ZmZiI+PHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIxMDAiIGZpbGwtb3BhY2l0eT0iLjAzIiByeD0iMTUiIHJ5PSIxNSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utb3BhY2l0eT0iLjEiIHN0cm9rZS13aWR0aD0iNCIvPjx0ZXh0IHg9IjIwIiB5PSIzNCIgZm9udC1mYW1pbHk9IidDb3VyaWVyIE5ldycsQXJpYWwsbW9ub3NwYWNlIiBmb250LXNpemU9IjIycHgiPkFtb3VudDwvdGV4dD48dGV4dCB4PSIyMCIgeT0iNzIiIGZvbnQtZmFtaWx5PSInQ291cmllciBOZXcnLEFyaWFsLG1vbm9zcGFjZSIgZm9udC1zaXplPSIyNnB4Ij4mIzg4MDU7IDEwSzwvdGV4dD48L2c+PGcgaWQ9IkR1cmF0aW9uIiBmaWxsPSIjZmZmIj48cmVjdCB3aWR0aD0iMTUyIiBoZWlnaHQ9IjEwMCIgZmlsbC1vcGFjaXR5PSIuMDMiIHJ4PSIxNSIgcnk9IjE1IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1vcGFjaXR5PSIuMSIgc3Ryb2tlLXdpZHRoPSI0Ii8+PHRleHQgeD0iMjAiIHk9IjM0IiBmb250LWZhbWlseT0iJ0NvdXJpZXIgTmV3JyxBcmlhbCxtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMjJweCI+RHVyYXRpb248L3RleHQ+PHRleHQgeD0iMjAiIHk9IjcyIiBmb250LWZhbWlseT0iJ0NvdXJpZXIgTmV3JyxBcmlhbCxtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMjZweCI+Jmx0OyAxIERheTwvdGV4dD48L2c+PC9kZWZzPjx0ZXh0IHRleHQtcmVuZGVyaW5nPSJvcHRpbWl6ZVNwZWVkIj48dGV4dFBhdGggc3RhcnRPZmZzZXQ9Ii0xMDAlIiBocmVmPSIjRmxvYXRpbmdUZXh0IiBmaWxsPSIjZmZmIiBmb250LWZhbWlseT0iJ0NvdXJpZXIgTmV3JyxBcmlhbCxtb25vc3BhY2UiIGZpbGwtb3BhY2l0eT0iLjgiIGZvbnQtc2l6ZT0iMjZweCI+PGFuaW1hdGUgYWRkaXRpdmU9InN1bSIgYXR0cmlidXRlTmFtZT0ic3RhcnRPZmZzZXQiIGJlZ2luPSIwcyIgZHVyPSI1MHMiIGZyb209IjAlIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgdG89IjEwMCUiLz4weDNkN2ViYzQwYWY3MDkyZTNmMWM4MWYyZTk5NmNiYTVjYWUyMDkwZDcg4oCiIFNhYmxpZXIgTG9ja3VwPC90ZXh0UGF0aD48dGV4dFBhdGggc3RhcnRPZmZzZXQ9IjAlIiBocmVmPSIjRmxvYXRpbmdUZXh0IiBmaWxsPSIjZmZmIiBmb250LWZhbWlseT0iJ0NvdXJpZXIgTmV3JyxBcmlhbCxtb25vc3BhY2UiIGZpbGwtb3BhY2l0eT0iLjgiIGZvbnQtc2l6ZT0iMjZweCI+PGFuaW1hdGUgYWRkaXRpdmU9InN1bSIgYXR0cmlidXRlTmFtZT0ic3RhcnRPZmZzZXQiIGJlZ2luPSIwcyIgZHVyPSI1MHMiIGZyb209IjAlIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgdG89IjEwMCUiLz4weDNkN2ViYzQwYWY3MDkyZTNmMWM4MWYyZTk5NmNiYTVjYWUyMDkwZDcg4oCiIFNhYmxpZXIgTG9ja3VwPC90ZXh0UGF0aD48dGV4dFBhdGggc3RhcnRPZmZzZXQ9Ii01MCUiIGhyZWY9IiNGbG9hdGluZ1RleHQiIGZpbGw9IiNmZmYiIGZvbnQtZmFtaWx5PSInQ291cmllciBOZXcnLEFyaWFsLG1vbm9zcGFjZSIgZmlsbC1vcGFjaXR5PSIuOCIgZm9udC1zaXplPSIyNnB4Ij48YW5pbWF0ZSBhZGRpdGl2ZT0ic3VtIiBhdHRyaWJ1dGVOYW1lPSJzdGFydE9mZnNldCIgYmVnaW49IjBzIiBkdXI9IjUwcyIgZnJvbT0iMCUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiB0bz0iMTAwJSIvPjB4YTBjYjg4OTcwN2Q0MjZhN2EzODY4NzBhMDNiYzcwZDFiMDY5NzU5OCDigKIgREFJPC90ZXh0UGF0aD48dGV4dFBhdGggc3RhcnRPZmZzZXQ9IjUwJSIgaHJlZj0iI0Zsb2F0aW5nVGV4dCIgZmlsbD0iI2ZmZiIgZm9udC1mYW1pbHk9IidDb3VyaWVyIE5ldycsQXJpYWwsbW9ub3NwYWNlIiBmaWxsLW9wYWNpdHk9Ii44IiBmb250LXNpemU9IjI2cHgiPjxhbmltYXRlIGFkZGl0aXZlPSJzdW0iIGF0dHJpYnV0ZU5hbWU9InN0YXJ0T2Zmc2V0IiBiZWdpbj0iMHMiIGR1cj0iNTBzIiBmcm9tPSIwJSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIHRvPSIxMDAlIi8+MHhhMGNiODg5NzA3ZDQyNmE3YTM4Njg3MGEwM2JjNzBkMWIwNjk3NTk4IOKAoiBEQUk8L3RleHRQYXRoPjwvdGV4dD48dXNlIGhyZWY9IiNHbG93IiBmaWxsLW9wYWNpdHk9Ii45Ii8+PHVzZSBocmVmPSIjR2xvdyIgeD0iMTAwMCIgeT0iMTAwMCIgZmlsbC1vcGFjaXR5PSIuOSIvPjx1c2UgaHJlZj0iI0xvZ28iIHg9IjE3MCIgeT0iMTcwIiB0cmFuc2Zvcm09InNjYWxlKC42KSIvPjx1c2UgaHJlZj0iI0hvdXJnbGFzcyIgeD0iMTUwIiB5PSI5MCIgdHJhbnNmb3JtPSJyb3RhdGUoMTApIiB0cmFuc2Zvcm0tb3JpZ2luPSI1MDAgNTAwIi8+PHVzZSBocmVmPSIjUHJvZ3Jlc3MiIHg9IjE0NCIgeT0iNzkwIi8+PHVzZSBocmVmPSIjU3RhdHVzIiB4PSIzNjgiIHk9Ijc5MCIvPjx1c2UgaHJlZj0iI0Ftb3VudCIgeD0iNTY4IiB5PSI3OTAiLz48dXNlIGhyZWY9IiNEdXJhdGlvbiIgeD0iNzA0IiB5PSI3OTAiLz48L3N2Zz4="}';
        assertEq(actualDecodedTokenURI, expectedDecodedTokenURI, "decoded token URI");
    }

    function test_WhenTokenURINotDecoded() external skipOnMismatch givenNFTExists {
        vm.warp({ newTimestamp: defaults.START_TIME() + defaults.TOTAL_DURATION() / 4 });

        string memory actualTokenURI = lockup.tokenURI(ids.defaultStream);
        string memory expectedTokenURI =
            "data:application/json;base64,eyJhdHRyaWJ1dGVzIjpbeyJ0cmFpdF90eXBlIjoiVG9rZW4iLCJ2YWx1ZSI6IkRBSSJ9LHsidHJhaXRfdHlwZSI6IlNlbmRlciIsInZhbHVlIjoiMHg2MzMyZTdiMWRlYjFmMWEwYjc3YjJiYjE4YjE0NDMzMGM3MjkxYmNhIn0seyJ0cmFpdF90eXBlIjoiU3RhdHVzIiwidmFsdWUiOiJTdHJlYW1pbmcifV0sImRlc2NyaXB0aW9uIjoiVGhpcyBORlQgcmVwcmVzZW50cyBhIHN0cmVhbSBpbiBhIFNhYmxpZXIgTG9ja3VwIGNvbnRyYWN0LiBUaGUgb3duZXIgb2YgdGhpcyBORlQgY2FuIHdpdGhkcmF3IHRoZSBzdHJlYW1lZCB0b2tlbnMsIHdoaWNoIGFyZSBkZW5vbWluYXRlZCBpbiBEQUkuXG5cbi0gU3RyZWFtIElEOiAxXG4tIFNhYmxpZXIgTG9ja3VwIEFkZHJlc3M6IDB4M2Q3ZWJjNDBhZjcwOTJlM2YxYzgxZjJlOTk2Y2JhNWNhZTIwOTBkN1xuLSBEQUkgQWRkcmVzczogMHhhMGNiODg5NzA3ZDQyNmE3YTM4Njg3MGEwM2JjNzBkMWIwNjk3NTk4XG5cbuKaoO+4jyBXQVJOSU5HOiBUcmFuc2ZlcnJpbmcgdGhlIE5GVCBtYWtlcyB0aGUgbmV3IG93bmVyIHRoZSByZWNpcGllbnQgb2YgdGhlIHN0cmVhbS4gVGhlIGZ1bmRzIGFyZSBub3QgYXV0b21hdGljYWxseSB3aXRoZHJhd24gZm9yIHRoZSBwcmV2aW91cyByZWNpcGllbnQuIiwiZXh0ZXJuYWxfdXJsIjoiaHR0cHM6Ly9zYWJsaWVyLmNvbSIsIm5hbWUiOiJTYWJsaWVyIExvY2t1cCAjMSIsImltYWdlIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l4TURBd0lpQm9aV2xuYUhROUlqRXdNREFpSUhacFpYZENiM2c5SWpBZ01DQXhNREF3SURFd01EQWlQanh5WldOMElIZHBaSFJvUFNJeE1EQWxJaUJvWldsbmFIUTlJakV3TUNVaUlHWnBiSFJsY2owaWRYSnNLQ05PYjJselpTa2lMejQ4Y21WamRDQjRQU0kzTUNJZ2VUMGlOekFpSUhkcFpIUm9QU0k0TmpBaUlHaGxhV2RvZEQwaU9EWXdJaUJtYVd4c1BTSWpabVptSWlCbWFXeHNMVzl3WVdOcGRIazlJaTR3TXlJZ2NuZzlJalExSWlCeWVUMGlORFVpSUhOMGNtOXJaVDBpSTJabVppSWdjM1J5YjJ0bExXOXdZV05wZEhrOUlpNHhJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqUWlMejQ4WkdWbWN6NDhZMmx5WTJ4bElHbGtQU0pIYkc5M0lpQnlQU0kxTURBaUlHWnBiR3c5SW5WeWJDZ2pVbUZrYVdGc1IyeHZkeWtpTHo0OFptbHNkR1Z5SUdsa1BTSk9iMmx6WlNJK1BHWmxSbXh2YjJRZ2VEMGlNQ0lnZVQwaU1DSWdkMmxrZEdnOUlqRXdNQ1VpSUdobGFXZG9kRDBpTVRBd0pTSWdabXh2YjJRdFkyOXNiM0k5SW1oemJDZ3lNekFzTWpFbExERXhKU2tpSUdac2IyOWtMVzl3WVdOcGRIazlJakVpSUhKbGMzVnNkRDBpWm14dmIyUkdhV3hzSWk4K1BHWmxWSFZ5WW5Wc1pXNWpaU0JpWVhObFJuSmxjWFZsYm1ONVBTSXVOQ0lnYm5WdFQyTjBZWFpsY3owaU15SWdjbVZ6ZFd4MFBTSk9iMmx6WlNJZ2RIbHdaVDBpWm5KaFkzUmhiRTV2YVhObElpOCtQR1psUW14bGJtUWdhVzQ5SWs1dmFYTmxJaUJwYmpJOUltWnNiMjlrUm1sc2JDSWdiVzlrWlQwaWMyOW1kQzFzYVdkb2RDSXZQand2Wm1sc2RHVnlQanh3WVhSb0lHbGtQU0pNYjJkdklpQm1hV3hzUFNJalptWm1JaUJtYVd4c0xXOXdZV05wZEhrOUlpNHhJaUJrUFNKdE1UTXpMalUxT1N3eE1qUXVNRE0wWXkwdU1ERXpMREl1TkRFeUxURXVNRFU1TERRdU9EUTRMVEl1T1RJekxEWXVOREF5TFRJdU5UVTRMREV1T0RFNUxUVXVNVFk0TERNdU5ETTVMVGN1T0RnNExEUXVPVGsyTFRFMExqUTBMRGd1TWpZeUxUTXhMakEwTnl3eE1pNDFOalV0TkRjdU5qYzBMREV5TGpVMk9TMDRMamcxT0M0d016WXRNVGN1T0RNNExURXVNamN5TFRJMkxqTXlPQzB6TGpZMk15MDVMamd3TmkweUxqYzJOaTB4T1M0d09EY3ROeTR4TVRNdE1qY3VOVFl5TFRFeUxqYzNPQzB4TXk0NE5ESXRPQzR3TWpVc09TNDBOamd0TWpndU5qQTJMREUyTGpFMU15MHpOUzR5TmpWb01HTXlMakF6TlMweExqZ3pPQ3cwTGpJMU1pMHpMalUwTml3MkxqUTJNeTAxTGpJeU5HZ3dZell1TkRJNUxUVXVOalUxTERFMkxqSXhPQzB5TGpnek5Td3lNQzR6TlRnc05DNHhOeXcwTGpFME15dzFMakExTnl3NExqZ3hOaXc1TGpZME9Td3hNeTQ1TWl3eE15NDNNelJvTGpBek4yTTFMamN6Tml3MkxqUTJNU3d4TlM0ek5UY3RNaTR5TlRNc09TNHpPQzA0TGpRNExEQXNNQzB6TGpVeE5TMHpMalV4TlMwekxqVXhOUzB6TGpVeE5TMHhNUzQwT1MweE1TNDBOemd0TlRJdU5qVTJMVFV5TGpZMk5DMDJOQzQ0TXpjdE5qUXVPRE0zYkM0d05Ea3RMakF6TjJNdE1TNDNNalV0TVM0Mk1EWXRNaTQzTVRrdE15NDRORGN0TWk0M05URXROaTR5TURSb01HTXRMakEwTmkweUxqTTNOU3d4TGpBMk1pMDBMalU0TWl3eUxqY3lOaTAyTGpJeU9XZ3diQzR4T0RVdExqRTBPR2d3WXk0d09Ua3RMakEyTWl3dU1qSXlMUzR4TkRnc0xqTTNMUzR5TlRsb01HTXlMakEyTFRFdU16WXlMRE11T1RVeExUSXVOakl4TERZdU1EUTBMVE11T0RReVF6VTNMamMyTXkwekxqUTNNeXc1Tnk0M05pMHlMak0wTVN3eE1qZ3VOak0zTERFNExqTXpNbU14Tmk0Mk56RXNPUzQ1TkRZdE1qWXVNelEwTERVMExqZ3hNeTB6T0M0Mk5URXNOREF1TVRrNUxUWXVNams1TFRZdU1EazJMVEU0TGpBMk15MHhOeTQzTkRNdE1Ua3VOalk0TFRFNExqZ3hNUzAyTGpBeE5pMDBMakEwTnkweE15NHdOakVzTkM0M056WXROeTQzTlRJc09TNDNOVEZzTmpndU1qVTBMRFk0TGpNM01XTXhMamN5TkN3eExqWXdNU3d5TGpjeE5Dd3pMamcwTERJdU56TTRMRFl1TVRreVdpSXZQanh3WVhSb0lHbGtQU0pHYkc5aGRHbHVaMVJsZUhRaUlHWnBiR3c5SW01dmJtVWlJR1E5SWsweE1qVWdORFZvTnpVd2N6Z3dJREFnT0RBZ09EQjJOelV3Y3pBZ09EQWdMVGd3SURnd2FDMDNOVEJ6TFRnd0lEQWdMVGd3SUMwNE1IWXROelV3Y3pBZ0xUZ3dJRGd3SUMwNE1DSXZQanh5WVdScFlXeEhjbUZrYVdWdWRDQnBaRDBpVW1Ga2FXRnNSMnh2ZHlJK1BITjBiM0FnYjJabWMyVjBQU0l3SlNJZ2MzUnZjQzFqYjJ4dmNqMGlhSE5zS0RNeU9TdzBOU1VzTlRrbEtTSWdjM1J2Y0MxdmNHRmphWFI1UFNJdU5pSXZQanh6ZEc5d0lHOW1abk5sZEQwaU1UQXdKU0lnYzNSdmNDMWpiMnh2Y2owaWFITnNLREl6TUN3eU1TVXNNVEVsS1NJZ2MzUnZjQzF2Y0dGamFYUjVQU0l3SWk4K1BDOXlZV1JwWVd4SGNtRmthV1Z1ZEQ0OGJHbHVaV0Z5UjNKaFpHbGxiblFnYVdROUlsTmhibVJVYjNBaUlIZ3hQU0l3SlNJZ2VURTlJakFsSWo0OGMzUnZjQ0J2Wm1aelpYUTlJakFsSWlCemRHOXdMV052Ykc5eVBTSm9jMndvTXpJNUxEUTFKU3cxT1NVcElpOCtQSE4wYjNBZ2IyWm1jMlYwUFNJeE1EQWxJaUJ6ZEc5d0xXTnZiRzl5UFNKb2Myd29Nak13TERJeEpTd3hNU1VwSWk4K1BDOXNhVzVsWVhKSGNtRmthV1Z1ZEQ0OGJHbHVaV0Z5UjNKaFpHbGxiblFnYVdROUlsTmhibVJDYjNSMGIyMGlJSGd4UFNJeE1EQWxJaUI1TVQwaU1UQXdKU0krUEhOMGIzQWdiMlptYzJWMFBTSXhNQ1VpSUhOMGIzQXRZMjlzYjNJOUltaHpiQ2d5TXpBc01qRWxMREV4SlNraUx6NDhjM1J2Y0NCdlptWnpaWFE5SWpFd01DVWlJSE4wYjNBdFkyOXNiM0k5SW1oemJDZ3pNamtzTkRVbExEVTVKU2tpTHo0OFlXNXBiV0YwWlNCaGRIUnlhV0oxZEdWT1lXMWxQU0o0TVNJZ1pIVnlQU0kyY3lJZ2NtVndaV0YwUTI5MWJuUTlJbWx1WkdWbWFXNXBkR1VpSUhaaGJIVmxjejBpTXpBbE96WXdKVHN4TWpBbE96WXdKVHN6TUNVN0lpOCtQQzlzYVc1bFlYSkhjbUZrYVdWdWRENDhiR2x1WldGeVIzSmhaR2xsYm5RZ2FXUTlJa2h2ZFhKbmJHRnpjMU4wY205clpTSWdaM0poWkdsbGJuUlVjbUZ1YzJadmNtMDlJbkp2ZEdGMFpTZzVNQ2tpSUdkeVlXUnBaVzUwVlc1cGRITTlJblZ6WlhKVGNHRmpaVTl1VlhObElqNDhjM1J2Y0NCdlptWnpaWFE5SWpVd0pTSWdjM1J2Y0MxamIyeHZjajBpYUhOc0tETXlPU3cwTlNVc05Ua2xLU0l2UGp4emRHOXdJRzltWm5ObGREMGlPREFsSWlCemRHOXdMV052Ykc5eVBTSm9jMndvTWpNd0xESXhKU3d4TVNVcElpOCtQQzlzYVc1bFlYSkhjbUZrYVdWdWRENDhaeUJwWkQwaVNHOTFjbWRzWVhOeklqNDhjR0YwYUNCa1BTSk5JRFV3TERNMk1DQmhJRE13TUN3ek1EQWdNQ0F4TERFZ05qQXdMREFnWVNBek1EQXNNekF3SURBZ01Td3hJQzAyTURBc01DSWdabWxzYkQwaUkyWm1aaUlnWm1sc2JDMXZjR0ZqYVhSNVBTSXVNRElpSUhOMGNtOXJaVDBpZFhKc0tDTkliM1Z5WjJ4aGMzTlRkSEp2YTJVcElpQnpkSEp2YTJVdGQybGtkR2c5SWpRaUx6NDhjR0YwYUNCa1BTSnROVFkyTERFMk1TNHlNREYyTFRVekxqa3lOR013TFRFNUxqTTRNaTB5TWk0MU1UTXRNemN1TlRZekxUWXpMak01T0MwMU1TNHhPVGd0TkRBdU56VTJMVEV6TGpVNU1pMDVOQzQ1TkRZdE1qRXVNRGM1TFRFMU1pNDFPRGN0TWpFdU1EYzVjeTB4TVRFdU9ETTRMRGN1TkRnM0xURTFNaTQyTURJc01qRXVNRGM1WXkwME1DNDRPVE1zTVRNdU5qTTJMVFl6TGpReE15d3pNUzQ0TVRZdE5qTXVOREV6TERVeExqRTVPSFkxTXk0NU1qUmpNQ3d4Tnk0eE9ERXNNVGN1TnpBMExETXpMalF5Tnl3MU1DNHlNak1zTkRZdU16azBkakk0TkM0NE1EbGpMVE15TGpVeE9Td3hNaTQ1TmkwMU1DNHlNak1zTWprdU1qQTJMVFV3TGpJeU15dzBOaTR6T1RSMk5UTXVPVEkwWXpBc01Ua3VNemd5TERJeUxqVXlMRE0zTGpVMk15dzJNeTQwTVRNc05URXVNVGs0TERRd0xqYzJNeXd4TXk0MU9USXNPVFF1T1RVMExESXhMakEzT1N3eE5USXVOakF5TERJeExqQTNPWE14TVRFdU9ETXhMVGN1TkRnM0xERTFNaTQxT0RjdE1qRXVNRGM1WXpRd0xqZzROaTB4TXk0Mk16WXNOak11TXprNExUTXhMamd4Tml3Mk15NHpPVGd0TlRFdU1UazRkaTAxTXk0NU1qUmpNQzB4Tnk0eE9UWXRNVGN1TnpBMExUTXpMalF6TlMwMU1DNHlNak10TkRZdU5EQXhWakl3Tnk0Mk1ETmpNekl1TlRFNUxURXlMamsyTnl3MU1DNHlNak10TWprdU1qQTJMRFV3TGpJeU15MDBOaTQwTURGYWJTMHpORGN1TkRZeUxEVTNMamM1TTJ3eE16QXVPVFU1TERFek1TNHdNamN0TVRNd0xqazFPU3d4TXpFdU1ERXpWakl4T0M0NU9UUmFiVEkyTWk0NU1qUXVNREl5ZGpJMk1pNHdNVGhzTFRFek1DNDVNemN0TVRNeExqQXdOaXd4TXpBdU9UTTNMVEV6TVM0d01UTmFJaUJtYVd4c1BTSWpNVFl4T0RJeUlqNDhMM0JoZEdnK1BIQnZiSGxuYjI0Z2NHOXBiblJ6UFNJek5UQWdNelV3TGpBeU5pQTBNVFV1TURNZ01qZzBMamszT0NBeU9EVWdNamcwTGprM09DQXpOVEFnTXpVd0xqQXlOaUlnWm1sc2JEMGlkWEpzS0NOVFlXNWtRbTkwZEc5dEtTSXZQanh3WVhSb0lHUTlJbTAwTVRZdU16UXhMREk0TVM0NU56VmpNQ3d1T1RFMExTNHpOVFFzTVM0NE1Ea3RNUzR3TXpVc01pNDJPQzAxTGpVME1pdzNMakEzTmkwek1pNDJOakVzTVRJdU5EVXROalV1TWpnc01USXVORFV0TXpJdU5qSTBMREF0TlRrdU56TTRMVFV1TXpjMExUWTFMakk0TFRFeUxqUTFMUzQyT0RFdExqZzNNaTB4TGpBek5TMHhMamMyTnkweExqQXpOUzB5TGpZNExEQXRMamt4TkM0ek5UUXRNUzQ0TURnc01TNHdNelV0TWk0Mk56WXNOUzQxTkRJdE55NHdOellzTXpJdU5qVTJMVEV5TGpRMUxEWTFMakk0TFRFeUxqUTFMRE15TGpZeE9Td3dMRFU1TGpjek9DdzFMak0zTkN3Mk5TNHlPQ3d4TWk0ME5TNDJPREV1T0RZM0xERXVNRE0xTERFdU56WXlMREV1TURNMUxESXVOamMyV2lJZ1ptbHNiRDBpZFhKc0tDTlRZVzVrVkc5d0tTSXZQanh3WVhSb0lHUTlJbTAwT0RFdU5EWXNOVEEwTGpFd01YWTFPQzQwTkRsakxUSXVNelV1TnpjdE5DNDRNaXd4TGpVeExUY3VNemtzTWk0eU15MHpNQzR6TERndU5UUXROelF1TmpVc01UTXVPVEl0TVRJMExqQTJMREV6TGpreUxUVXpMallzTUMweE1ERXVNalF0Tmk0ek15MHhNekV1TkRjdE1UWXVNVFoyTFRVNExqUXpPV2d5TmpJdU9USmFJaUJtYVd4c1BTSjFjbXdvSTFOaGJtUkNiM1IwYjIwcElpOCtQR1ZzYkdsd2MyVWdZM2c5SWpNMU1DSWdZM2s5SWpVd05DNHhNREVpSUhKNFBTSXhNekV1TkRZeUlpQnllVDBpTWpndU1UQTRJaUJtYVd4c1BTSjFjbXdvSTFOaGJtUlViM0FwSWk4K1BHY2dabWxzYkQwaWJtOXVaU0lnYzNSeWIydGxQU0oxY213b0kwaHZkWEpuYkdGemMxTjBjbTlyWlNraUlITjBjbTlyWlMxc2FXNWxZMkZ3UFNKeWIzVnVaQ0lnYzNSeWIydGxMVzFwZEdWeWJHbHRhWFE5SWpFd0lpQnpkSEp2YTJVdGQybGtkR2c5SWpRaVBqeHdZWFJvSUdROUltMDFOalV1TmpReExERXdOeTR5T0dNd0xEa3VOVE0zTFRVdU5UWXNNVGd1TmpJNUxURTFMalkzTml3eU5pNDVOek5vTFM0d01qTmpMVGt1TWpBMExEY3VOVGsyTFRJeUxqRTVOQ3d4TkM0MU5qSXRNemd1TVRrM0xESXdMalU1TWkwek9TNDFNRFFzTVRRdU9UTTJMVGszTGpNeU5Td3lOQzR6TlRVdE1UWXhMamN6TXl3eU5DNHpOVFV0T1RBdU5EZ3NNQzB4TmpjdU9UUTRMVEU0TGpVNE1pMHhPVGt1T1RVekxUUTBMamswT0dndExqQXlNMk10TVRBdU1URTFMVGd1TXpRMExURTFMalkzTmkweE55NDBNemN0TVRVdU5qYzJMVEkyTGprM015d3dMVE01TGpjek5TdzVOaTQxTlRRdE56RXVPVEl4TERJeE5TNDJOVEl0TnpFdU9USXhjekl4TlM0Mk1qa3NNekl1TVRnMUxESXhOUzQyTWprc056RXVPVEl4V2lJdlBqeHdZWFJvSUdROUltMHhNelF1TXpZc01UWXhMakl3TTJNd0xETTVMamN6TlN3NU5pNDFOVFFzTnpFdU9USXhMREl4TlM0Mk5USXNOekV1T1RJeGN6SXhOUzQyTWprdE16SXVNVGcyTERJeE5TNDJNamt0TnpFdU9USXhJaTgrUEd4cGJtVWdlREU5SWpFek5DNHpOaUlnZVRFOUlqRTJNUzR5TURNaUlIZ3lQU0l4TXpRdU16WWlJSGt5UFNJeE1EY3VNamdpTHo0OGJHbHVaU0I0TVQwaU5UWTFMalkwSWlCNU1UMGlNVFl4TGpJd015SWdlREk5SWpVMk5TNDJOQ0lnZVRJOUlqRXdOeTR5T0NJdlBqeHNhVzVsSUhneFBTSXhPRFF1TlRnMElpQjVNVDBpTWpBMkxqZ3lNeUlnZURJOUlqRTROQzQxT0RVaUlIa3lQU0kxTXpjdU5UYzVJaTgrUEd4cGJtVWdlREU5SWpJeE9DNHhPREVpSUhreFBTSXlNVGd1TVRFNElpQjRNajBpTWpFNExqRTRNU0lnZVRJOUlqVTJNaTQxTXpjaUx6NDhiR2x1WlNCNE1UMGlORGd4TGpneE9DSWdlVEU5SWpJeE9DNHhORElpSUhneVBTSTBPREV1T0RFNUlpQjVNajBpTlRZeUxqUXlPQ0l2UGp4c2FXNWxJSGd4UFNJMU1UVXVOREUxSWlCNU1UMGlNakEzTGpNMU1pSWdlREk5SWpVeE5TNDBNVFlpSUhreVBTSTFNemN1TlRjNUlpOCtQSEJoZEdnZ1pEMGliVEU0TkM0MU9DdzFNemN1TlRoak1DdzFMalExTERRdU1qY3NNVEF1TmpVc01USXVNRE1zTVRVdU5ESm9MakF5WXpVdU5URXNNeTR6T1N3eE1pNDNPU3cyTGpVMUxESXhMalUxTERrdU5ESXNNekF1TWpFc09TNDVMRGM0TGpBeUxERTJMakk0TERFek1TNDRNeXd4Tmk0eU9DdzBPUzQwTVN3d0xEa3pMamMyTFRVdU16Z3NNVEkwTGpBMkxURXpMamt5TERJdU55MHVOellzTlM0eU9TMHhMalUwTERjdU56VXRNaTR6TlN3NExqYzNMVEl1T0Rjc01UWXVNRFV0Tmk0d05Dd3lNUzQxTmkwNUxqUXphREJqTnk0M05pMDBMamMzTERFeUxqQTBMVGt1T1Rjc01USXVNRFF0TVRVdU5ESWlMejQ4Y0dGMGFDQmtQU0p0TVRnMExqVTRNaXcwT1RJdU5qVTJZeTB6TVM0ek5UUXNNVEl1TkRnMUxUVXdMakl5TXl3eU9DNDFPQzAxTUM0eU1qTXNORFl1TVRReUxEQXNPUzQxTXpZc05TNDFOalFzTVRndU5qSTNMREUxTGpZM055d3lOaTQ1Tmpsb0xqQXlNbU00TGpVd015dzNMakF3TlN3eU1DNHlNVE1zTVRNdU5EWXpMRE0wTGpVeU5Dd3hPUzR4TlRrc09TNDVPVGtzTXk0NU9URXNNakV1TWpZNUxEY3VOakE1TERNekxqVTVOeXd4TUM0M09EZ3NNell1TkRVc09TNDBNRGNzT0RJdU1UZ3hMREUxTGpBd01pd3hNekV1T0RNMUxERTFMakF3TW5NNU5TNHpOak10TlM0MU9UVXNNVE14TGpnd055MHhOUzR3TURKak1UQXVPRFEzTFRJdU56a3NNakF1T0RZM0xUVXVPVEkyTERJNUxqa3lOQzA1TGpNME9Td3hMakkwTkMwdU5EWTNMREl1TkRjekxTNDVORElzTXk0Mk56TXRNUzQwTWpRc01UUXVNekkyTFRVdU5qazJMREkyTGpBek5TMHhNaTR4TmpFc016UXVOVEkwTFRFNUxqRTNNMmd1TURJeVl6RXdMakV4TkMwNExqTTBNaXd4TlM0Mk56Y3RNVGN1TkRNekxERTFMalkzTnkweU5pNDVOamtzTUMweE55NDFOakl0TVRndU9EWTVMVE16TGpZMk5TMDFNQzR5TWpNdE5EWXVNVFVpTHo0OGNHRjBhQ0JrUFNKdE1UTTBMak0yTERVNU1pNDNNbU13TERNNUxqY3pOU3c1Tmk0MU5UUXNOekV1T1RJeExESXhOUzQyTlRJc056RXVPVEl4Y3pJeE5TNDJNamt0TXpJdU1UZzJMREl4TlM0Mk1qa3ROekV1T1RJeElpOCtQR3hwYm1VZ2VERTlJakV6TkM0ek5pSWdlVEU5SWpVNU1pNDNNaUlnZURJOUlqRXpOQzR6TmlJZ2VUSTlJalV6T0M0M09UY2lMejQ4YkdsdVpTQjRNVDBpTlRZMUxqWTBJaUI1TVQwaU5Ua3lMamN5SWlCNE1qMGlOVFkxTGpZMElpQjVNajBpTlRNNExqYzVOeUl2UGp4d2IyeDViR2x1WlNCd2IybHVkSE05SWpRNE1TNDRNaklnTkRneExqa3dNU0EwT0RFdU56azRJRFE0TVM0NE56Y2dORGd4TGpjM05TQTBPREV1T0RVMElETTFNQzR3TVRVZ016VXdMakF5TmlBeU1UZ3VNVGcxSURJeE9DNHhNamtpTHo0OGNHOXNlV3hwYm1VZ2NHOXBiblJ6UFNJeU1UZ3VNVGcxSURRNE1TNDVNREVnTWpFNExqSXpNU0EwT0RFdU9EVTBJRE0xTUM0d01UVWdNelV3TGpBeU5pQTBPREV1T0RJeUlESXhPQzR4TlRJaUx6NDhMMmMrUEM5blBqeG5JR2xrUFNKUWNtOW5jbVZ6Y3lJZ1ptbHNiRDBpSTJabVppSStQSEpsWTNRZ2QybGtkR2c5SWpJd09DSWdhR1ZwWjJoMFBTSXhNREFpSUdacGJHd3RiM0JoWTJsMGVUMGlMakF6SWlCeWVEMGlNVFVpSUhKNVBTSXhOU0lnYzNSeWIydGxQU0lqWm1abUlpQnpkSEp2YTJVdGIzQmhZMmwwZVQwaUxqRWlJSE4wY205clpTMTNhV1IwYUQwaU5DSXZQangwWlhoMElIZzlJakl3SWlCNVBTSXpOQ0lnWm05dWRDMW1ZVzFwYkhrOUlpZERiM1Z5YVdWeUlFNWxkeWNzUVhKcFlXd3NiVzl1YjNOd1lXTmxJaUJtYjI1MExYTnBlbVU5SWpJeWNIZ2lQbEJ5YjJkeVpYTnpQQzkwWlhoMFBqeDBaWGgwSUhnOUlqSXdJaUI1UFNJM01pSWdabTl1ZEMxbVlXMXBiSGs5SWlkRGIzVnlhV1Z5SUU1bGR5Y3NRWEpwWVd3c2JXOXViM053WVdObElpQm1iMjUwTFhOcGVtVTlJakkyY0hnaVBqSXlMams0SlR3dmRHVjRkRDQ4WnlCbWFXeHNQU0p1YjI1bElqNDhZMmx5WTJ4bElHTjRQU0l4TmpZaUlHTjVQU0kxTUNJZ2NqMGlNaklpSUhOMGNtOXJaVDBpYUhOc0tESXpNQ3d5TVNVc01URWxLU0lnYzNSeWIydGxMWGRwWkhSb1BTSXhNQ0l2UGp4amFYSmpiR1VnWTNnOUlqRTJOaUlnWTNrOUlqVXdJaUJ3WVhSb1RHVnVaM1JvUFNJeE1EQXdNQ0lnY2owaU1qSWlJSE4wY205clpUMGlhSE5zS0RNeU9TdzBOU1VzTlRrbEtTSWdjM1J5YjJ0bExXUmhjMmhoY25KaGVUMGlNVEF3TURBaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSTNOekF5SWlCemRISnZhMlV0YkdsdVpXTmhjRDBpY205MWJtUWlJSE4wY205clpTMTNhV1IwYUQwaU5TSWdkSEpoYm5ObWIzSnRQU0p5YjNSaGRHVW9MVGt3S1NJZ2RISmhibk5tYjNKdExXOXlhV2RwYmowaU1UWTJJRFV3SWk4K1BDOW5Qand2Wno0OFp5QnBaRDBpVTNSaGRIVnpJaUJtYVd4c1BTSWpabVptSWo0OGNtVmpkQ0IzYVdSMGFEMGlNVGcwSWlCb1pXbG5hSFE5SWpFd01DSWdabWxzYkMxdmNHRmphWFI1UFNJdU1ETWlJSEo0UFNJeE5TSWdjbms5SWpFMUlpQnpkSEp2YTJVOUlpTm1abVlpSUhOMGNtOXJaUzF2Y0dGamFYUjVQU0l1TVNJZ2MzUnliMnRsTFhkcFpIUm9QU0kwSWk4K1BIUmxlSFFnZUQwaU1qQWlJSGs5SWpNMElpQm1iMjUwTFdaaGJXbHNlVDBpSjBOdmRYSnBaWElnVG1WM0p5eEJjbWxoYkN4dGIyNXZjM0JoWTJVaUlHWnZiblF0YzJsNlpUMGlNakp3ZUNJK1UzUmhkSFZ6UEM5MFpYaDBQangwWlhoMElIZzlJakl3SWlCNVBTSTNNaUlnWm05dWRDMW1ZVzFwYkhrOUlpZERiM1Z5YVdWeUlFNWxkeWNzUVhKcFlXd3NiVzl1YjNOd1lXTmxJaUJtYjI1MExYTnBlbVU5SWpJMmNIZ2lQbE4wY21WaGJXbHVaend2ZEdWNGRENDhMMmMrUEdjZ2FXUTlJa0Z0YjNWdWRDSWdabWxzYkQwaUkyWm1aaUkrUEhKbFkzUWdkMmxrZEdnOUlqRXlNQ0lnYUdWcFoyaDBQU0l4TURBaUlHWnBiR3d0YjNCaFkybDBlVDBpTGpBeklpQnllRDBpTVRVaUlISjVQU0l4TlNJZ2MzUnliMnRsUFNJalptWm1JaUJ6ZEhKdmEyVXRiM0JoWTJsMGVUMGlMakVpSUhOMGNtOXJaUzEzYVdSMGFEMGlOQ0l2UGp4MFpYaDBJSGc5SWpJd0lpQjVQU0l6TkNJZ1ptOXVkQzFtWVcxcGJIazlJaWREYjNWeWFXVnlJRTVsZHljc1FYSnBZV3dzYlc5dWIzTndZV05sSWlCbWIyNTBMWE5wZW1VOUlqSXljSGdpUGtGdGIzVnVkRHd2ZEdWNGRENDhkR1Y0ZENCNFBTSXlNQ0lnZVQwaU56SWlJR1p2Ym5RdFptRnRhV3g1UFNJblEyOTFjbWxsY2lCT1pYY25MRUZ5YVdGc0xHMXZibTl6Y0dGalpTSWdabTl1ZEMxemFYcGxQU0l5Tm5CNElqNG1Jemc0TURVN0lERXdTend2ZEdWNGRENDhMMmMrUEdjZ2FXUTlJa1IxY21GMGFXOXVJaUJtYVd4c1BTSWpabVptSWo0OGNtVmpkQ0IzYVdSMGFEMGlNVFV5SWlCb1pXbG5hSFE5SWpFd01DSWdabWxzYkMxdmNHRmphWFI1UFNJdU1ETWlJSEo0UFNJeE5TSWdjbms5SWpFMUlpQnpkSEp2YTJVOUlpTm1abVlpSUhOMGNtOXJaUzF2Y0dGamFYUjVQU0l1TVNJZ2MzUnliMnRsTFhkcFpIUm9QU0kwSWk4K1BIUmxlSFFnZUQwaU1qQWlJSGs5SWpNMElpQm1iMjUwTFdaaGJXbHNlVDBpSjBOdmRYSnBaWElnVG1WM0p5eEJjbWxoYkN4dGIyNXZjM0JoWTJVaUlHWnZiblF0YzJsNlpUMGlNakp3ZUNJK1JIVnlZWFJwYjI0OEwzUmxlSFErUEhSbGVIUWdlRDBpTWpBaUlIazlJamN5SWlCbWIyNTBMV1poYldsc2VUMGlKME52ZFhKcFpYSWdUbVYzSnl4QmNtbGhiQ3h0YjI1dmMzQmhZMlVpSUdadmJuUXRjMmw2WlQwaU1qWndlQ0krSm14ME95QXhJRVJoZVR3dmRHVjRkRDQ4TDJjK1BDOWtaV1p6UGp4MFpYaDBJSFJsZUhRdGNtVnVaR1Z5YVc1blBTSnZjSFJwYldsNlpWTndaV1ZrSWo0OGRHVjRkRkJoZEdnZ2MzUmhjblJQWm1aelpYUTlJaTB4TURBbElpQm9jbVZtUFNJalJteHZZWFJwYm1kVVpYaDBJaUJtYVd4c1BTSWpabVptSWlCbWIyNTBMV1poYldsc2VUMGlKME52ZFhKcFpYSWdUbVYzSnl4QmNtbGhiQ3h0YjI1dmMzQmhZMlVpSUdacGJHd3RiM0JoWTJsMGVUMGlMamdpSUdadmJuUXRjMmw2WlQwaU1qWndlQ0krUEdGdWFXMWhkR1VnWVdSa2FYUnBkbVU5SW5OMWJTSWdZWFIwY21saWRYUmxUbUZ0WlQwaWMzUmhjblJQWm1aelpYUWlJR0psWjJsdVBTSXdjeUlnWkhWeVBTSTFNSE1pSUdaeWIyMDlJakFsSWlCeVpYQmxZWFJEYjNWdWREMGlhVzVrWldacGJtbDBaU0lnZEc4OUlqRXdNQ1VpTHo0d2VETmtOMlZpWXpRd1lXWTNNRGt5WlRObU1XTTRNV1l5WlRrNU5tTmlZVFZqWVdVeU1Ea3daRGNnNG9DaUlGTmhZbXhwWlhJZ1RHOWphM1Z3UEM5MFpYaDBVR0YwYUQ0OGRHVjRkRkJoZEdnZ2MzUmhjblJQWm1aelpYUTlJakFsSWlCb2NtVm1QU0lqUm14dllYUnBibWRVWlhoMElpQm1hV3hzUFNJalptWm1JaUJtYjI1MExXWmhiV2xzZVQwaUowTnZkWEpwWlhJZ1RtVjNKeXhCY21saGJDeHRiMjV2YzNCaFkyVWlJR1pwYkd3dGIzQmhZMmwwZVQwaUxqZ2lJR1p2Ym5RdGMybDZaVDBpTWpad2VDSStQR0Z1YVcxaGRHVWdZV1JrYVhScGRtVTlJbk4xYlNJZ1lYUjBjbWxpZFhSbFRtRnRaVDBpYzNSaGNuUlBabVp6WlhRaUlHSmxaMmx1UFNJd2N5SWdaSFZ5UFNJMU1ITWlJR1p5YjIwOUlqQWxJaUJ5WlhCbFlYUkRiM1Z1ZEQwaWFXNWtaV1pwYm1sMFpTSWdkRzg5SWpFd01DVWlMejR3ZUROa04yVmlZelF3WVdZM01Ea3laVE5tTVdNNE1XWXlaVGs1Tm1OaVlUVmpZV1V5TURrd1pEY2c0b0NpSUZOaFlteHBaWElnVEc5amEzVndQQzkwWlhoMFVHRjBhRDQ4ZEdWNGRGQmhkR2dnYzNSaGNuUlBabVp6WlhROUlpMDFNQ1VpSUdoeVpXWTlJaU5HYkc5aGRHbHVaMVJsZUhRaUlHWnBiR3c5SWlObVptWWlJR1p2Ym5RdFptRnRhV3g1UFNJblEyOTFjbWxsY2lCT1pYY25MRUZ5YVdGc0xHMXZibTl6Y0dGalpTSWdabWxzYkMxdmNHRmphWFI1UFNJdU9DSWdabTl1ZEMxemFYcGxQU0l5Tm5CNElqNDhZVzVwYldGMFpTQmhaR1JwZEdsMlpUMGljM1Z0SWlCaGRIUnlhV0oxZEdWT1lXMWxQU0p6ZEdGeWRFOW1abk5sZENJZ1ltVm5hVzQ5SWpCeklpQmtkWEk5SWpVd2N5SWdabkp2YlQwaU1DVWlJSEpsY0dWaGRFTnZkVzUwUFNKcGJtUmxabWx1YVhSbElpQjBiejBpTVRBd0pTSXZQakI0WVRCallqZzRPVGN3TjJRME1qWmhOMkV6T0RZNE56QmhNRE5pWXpjd1pERmlNRFk1TnpVNU9DRGlnS0lnUkVGSlBDOTBaWGgwVUdGMGFENDhkR1Y0ZEZCaGRHZ2djM1JoY25SUFptWnpaWFE5SWpVd0pTSWdhSEpsWmowaUkwWnNiMkYwYVc1blZHVjRkQ0lnWm1sc2JEMGlJMlptWmlJZ1ptOXVkQzFtWVcxcGJIazlJaWREYjNWeWFXVnlJRTVsZHljc1FYSnBZV3dzYlc5dWIzTndZV05sSWlCbWFXeHNMVzl3WVdOcGRIazlJaTQ0SWlCbWIyNTBMWE5wZW1VOUlqSTJjSGdpUGp4aGJtbHRZWFJsSUdGa1pHbDBhWFpsUFNKemRXMGlJR0YwZEhKcFluVjBaVTVoYldVOUluTjBZWEowVDJabWMyVjBJaUJpWldkcGJqMGlNSE1pSUdSMWNqMGlOVEJ6SWlCbWNtOXRQU0l3SlNJZ2NtVndaV0YwUTI5MWJuUTlJbWx1WkdWbWFXNXBkR1VpSUhSdlBTSXhNREFsSWk4K01IaGhNR05pT0RnNU56QTNaRFF5Tm1FM1lUTTROamczTUdFd00ySmpOekJrTVdJd05qazNOVGs0SU9LQW9pQkVRVWs4TDNSbGVIUlFZWFJvUGp3dmRHVjRkRDQ4ZFhObElHaHlaV1k5SWlOSGJHOTNJaUJtYVd4c0xXOXdZV05wZEhrOUlpNDVJaTgrUEhWelpTQm9jbVZtUFNJalIyeHZkeUlnZUQwaU1UQXdNQ0lnZVQwaU1UQXdNQ0lnWm1sc2JDMXZjR0ZqYVhSNVBTSXVPU0l2UGp4MWMyVWdhSEpsWmowaUkweHZaMjhpSUhnOUlqRTNNQ0lnZVQwaU1UY3dJaUIwY21GdWMyWnZjbTA5SW5OallXeGxLQzQyS1NJdlBqeDFjMlVnYUhKbFpqMGlJMGh2ZFhKbmJHRnpjeUlnZUQwaU1UVXdJaUI1UFNJNU1DSWdkSEpoYm5ObWIzSnRQU0p5YjNSaGRHVW9NVEFwSWlCMGNtRnVjMlp2Y20wdGIzSnBaMmx1UFNJMU1EQWdOVEF3SWk4K1BIVnpaU0JvY21WbVBTSWpVSEp2WjNKbGMzTWlJSGc5SWpFME5DSWdlVDBpTnprd0lpOCtQSFZ6WlNCb2NtVm1QU0lqVTNSaGRIVnpJaUI0UFNJek5qZ2lJSGs5SWpjNU1DSXZQangxYzJVZ2FISmxaajBpSTBGdGIzVnVkQ0lnZUQwaU5UWTRJaUI1UFNJM09UQWlMejQ4ZFhObElHaHlaV1k5SWlORWRYSmhkR2x2YmlJZ2VEMGlOekEwSWlCNVBTSTNPVEFpTHo0OEwzTjJaejQ9In0=";
        assertEq(actualTokenURI, expectedTokenURI, "token URI");
    }
}
